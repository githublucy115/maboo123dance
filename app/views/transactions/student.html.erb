<h1>Transaction history for <%=link_to @student.name, @student%></h1>

<table id="transactions" class='table table-striped table-hover'>
	<thead>
		<tr>
			<th>Location</th>
			<th>Date</th>
			<th>Amount</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
<% @transactions.each do |transaction| %>
		<tr class=<%=transaction.amount<0 ? "expense" : "payment"%>>
			<td><%= link_to Classrecord.find(transaction.classrecord_id).location, transactions_classrecord_path(:id=>transaction.classrecord_id)%></td>
			<td><%=transaction.created_at.to_time.strftime("%m/%d/%Y")%></td>
			<td><%= transaction.payment_method == "credit" ? transaction.amount + " credits" : number_to_currency(transaction.amount) + " (paid by #{transaction.payment_method})" %></td>
			<td>
				<form action="" method='post'>
					<input type="hidden" name='transaction[student_id]' value=<%=transaction.student_id%> />
					<input type="hidden" name='transaction[classrecord_id]' value=<%=transaction.classrecord_id%> />
					$<input type='text', style='width:50px;' name='transaction[amount]' value=<%=transaction.amount%> />
					<input class='btn' type='submit' value='Make payment' name='commit'/>
					<label class='checkbox'><input class='check_boxes optional' type='radio' value="cash" name='transaction[payment_method]' checked='checked'/>By cash?</label>
					<label class='checkbox'><input class='check_boxes optional' type='radio' value="check" name='transaction[payment_method]'/>By check?</label>
					<label class='checkbox'><input class='check_boxes optional' type='radio' value="card" name='transaction[payment_method]'/>By card?</label>
					<label class='checkbox'><input class='check_boxes optional' type='radio' value="guest" name='transaction[payment_method]'/>Guest?</label>
				</form>
			</td>
		</tr>
		<%=	@classrecord_location %>
<% end %>
	</tbody>
</table>